<!DOCTYPE html>
<html lang="en-US" dir="ltr">

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>Jadoo | Travel Agency Landing Page UI</title>


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="../assets/img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="../assets/img/favicons/favicon-16x16.png">
    <link rel="shortcut icon" type="image/x-icon" href="../assets/img/favicons/favicon.ico">
    <link rel="manifest" href="../assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">

    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link href="../assets/css/theme.css" rel="stylesheet" />


  </head>


  <body>

    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main" id="top">
              <<nav class="navbar navbar-expand-lg navbar-light fixed-top py-5 d-block">
            <div class="container">
                <a class="navbar-brand" href="student_home.html"><img src="assets/img/logo.svg" height="34" alt="logo" /></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse border-top border-lg-0 mt-4 mt-lg-0" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto pt-2 pt-lg-0 font-base align-items-lg-center align-items-start">
                        <li class="nav-item px-3 px-xl-4"><a class="nav-link fw-medium" href="{{ url_for('teacher_home') }}">首页</a></li>
                        <a href="{{ url_for('upload_student') }}"><li class="nav-item px-3 px-xl-4">音频处理</li></a>
                        <a href="{{ url_for('home') }}"><li class="nav-item px-3 px-xl-4">退出账户</li></a>
                </div>
            </div>
        </nav>
      <section style="padding-top: 7rem;">
        <div class="bg-holder" style="background-image:url(../assets/img/hero/hero-bg.svg);">
        </div>
        <!--/.bg-holder-->


      </section>


      <!-- ============================================-->
      <!-- <section> begin ============================-->
      <section id="note-management">
         <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6">
                    <div class="mb-4 text-start">
                        <h5 class="text-secondary">笔记操作</h5>
                        <h3 class="fs-xl-10 fs-lg-8 fs-7 fw-bold font-cursive text-capitalize">管理你的学习笔记</h3>
                    </div>
                    <!-- 展示生成的笔记内容区域 -->
                    <div class="row">
                    <div class="col-sm-4">
                        <div id="points-content" class="form-control" contentEditable="true" placeholder="要点" style="background-color:#FDE2C2;height:250px;overflow-y: auto;
                    overflow-x: hidden;">要点栏：<br>{{points}}</div>
                    </div>
                    <div class="col-sm-8">
                        <div id="note-content" class="form-control" contentEditable="true" rows="10" placeholder="笔记" style="background-color:#FFD9DF;height:250px;;overflow-y: auto;
                    overflow-x: hidden;">笔记栏：<br>{{note}}</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-12">
                        <div id="summary-content" class="form-control" contentEditable="true" rows="5" placeholder="总结" style="background-color:#F0F6EF;height:150px;;overflow-y: auto;
                    overflow-x: hidden;">总结栏：<br>{{summary}}</div>
                    </div>
                </div>
                <br>
                    <button id="add-annotation-btn" class="btn btn-secondary mb-3" onclick="boldText()">加粗</button>
                    <button id="add-highlight-btn" class="btn btn-warning mb-3" onclick="highlight('yellow')">添加高亮</button>
                    <!--<button id="remove-highlight-btn" class="btn btn-light mb-3" onclick="removeHighlight()">移除高亮</button>-->
                    <!-- 学科下拉菜单 -->
                    <div class="mb-3">
                        <label for="subject-select" class="form-label">学科</label>
                        <select class="form-select" id="subject-select">
                            <option value="语文">语文</option>
                            <option value="数学">数学</option>
                            <option value="英语">英语</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>
                    <!-- 笔记类型下拉菜单 -->
                    <div class="mb-3">
                        <label for="note-type-select" class="form-label">笔记类型</label>
                        <select class="form-select" id="note-type-select">
                            <option value="复习笔记">复习笔记</option>
                            <option value="课堂笔记">课堂笔记</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>
                    <button id="save-note-btn" class="btn btn-primary">保存笔记</button>
                    <a href="{{ url_for('graph') }}"> <button id="graph-btn" class="btn btn-primary">生成知识图谱</button></a>

                </div>
                <div class="col-lg-6 d-flex justify-content-center align-items-start">
                    <div class="card position-relative shadow" style="max-width: 370px;">
                        <div class="position-absolute z-index--1 me-10 me-xxl-0" style="right:-160px;top:-210px;"> <img src="../assets/img/steps/heart.svg" style="max-width:550px;" alt="音频示意图片" /></div>
                        <div class="card-body p-3">
                            <audio controls id="audio-player">
                                    <source src="{{audio_path}}" type="audio/mpeg">
                                    你的浏览器不支持音频播放
                            </audio>
                            <div class="mt-3">
                                <p class="fw-medium">音频相关说明：这是与笔记相关的音频内容，可点击播放进行回顾等操作。</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </section>

      <!-- <section> close ============================-->
      <!-- ============================================-->


      <!-- ============================================-->
      <!-- <section> begin ============================-->
      <section id="note-preview">
        <div class="container">
            <div class="row">
                <div class="col-lg-5">
                    <div class="mb-8 text-start">
                        <h5 class="text-secondary">我的笔记</h5>
                        <h3 class="fs-xl-10 fs-lg-8 fs-7 fw-bold font-cursive text-capitalize">查看你的学习笔记摘要</h3>
                    </div>
                </div>
                <div class="col-lg-1"></div>
                <div class="col-lg-6">
                    <div class="pe-7 ps-5 ps-lg-0">
                        <div class="carousel slide carousel-fade position-static" id="noteCarousel" data-bs-ride="carousel">
                            <div class="carousel-indicators">
                                <button class="active" type="button" data-bs-target="#noteCarousel" data-bs-slide-to="0" aria-current="true" aria-label="Note 0"></button>
                                <button class="false" type="button" data-bs-target="#noteCarousel" data-bs-slide-to="1" aria-current="true" aria-label="Note 1"></button>
                                <button class="false" type="button" data-bs-target="#noteCarousel" data-bs-slide-to="2" aria-current="true" aria-label="Note 2"></button>
                            </div>
                            <div class="carousel-inner">
                                <div class="carousel-item position-relative active">
                                    <div class="card shadow" style="border-radius: 10px;">
                                        <div class="position-absolute start-0 top-0 translate-middle"> <img class="rounded-circle fit-cover" src="../assets/img/testimonial/author.png" height="65" width="65" alt="" /></div>
                                        <div class="card-body p-4">
                                            <p class="fw-medium mb-4">“这是一份语文笔记的摘要，记录了古诗词赏析的要点，包含作者背景、诗词意象等内容。”</p>
                                            <h5 class="text-secondary">语文笔记</h5>
                                            <p class="fw-medium fs--1 mb-0">时间</p>
                                        </div>
                                    </div>
                                    <div class="card shadow-sm position-absolute top-0 z-index--1 mb-3 w-100 h-100" style="border-radius: 10px; transform: translate(25px, 25px)">
                                    </div>
                                </div>
                                <div class="carousel-item position-relative ">
                                    <div class="card shadow" style="border-radius: 10px;">
                                        <div class="position-absolute start-0 top-0 translate-middle"> <img class="rounded-circle fit-cover" src="../assets/img/testimonial/author2.png" height="65" width="65" alt="" /></div>
                                        <div class="card-body p-4">
                                            <p class="fw-medium mb-4">“数学笔记摘要：重点讲解了函数的图像与性质，列举了典型例题及解题思路。”</p>
                                            <h5 class="text-secondary">数学笔记</h5>
                                            <p class="fw-medium fs--1 mb-0">时间</p>
                                        </div>
                                    </div>
                                    <div class="card shadow-sm position-absolute top-0 z-index--1 mb-3 w-100 h-100" style="border-radius: 10px; transform: translate(25px, 25px)">
                                    </div>
                                </div>
                                <div class="carousel-item position-relative ">
                                    <div class="card shadow" style="border-radius: 10px;">
                                        <div class="position-absolute start-0 top-0 translate-middle"> <img class="rounded-circle fit-cover" src="../assets/img/testimonial/author3.png" height="65" width="65" alt="" /></div>
                                        <div class="card-body p-4">
                                            <p class="fw-medium mb-4">“英语笔记：涵盖了新学单词的用法、语法知识点，还有一篇短文阅读的分析。”</p>
                                            <h5 class="text-secondary">英语笔记</h5>
                                            <p class="fw-medium fs--1 mb-0">时间</p>
                                        </div>
                                    </div>
                                    <div class="card shadow-sm position-absolute top-0 z-index--1 mb-3 w-100 h-100" style="border-radius: 10px; transform: translate(25px, 25px)">
                                    </div>
                                </div>
                            </div>
                            <div class="carousel-navigation d-flex flex-column flex-between-center position-absolute end-0 top-lg-50 bottom-0 translate-middle-y z-index-1 me-3 me-lg-0" style="height: 60px; width: 20px;">
                                <button class="carousel-control-prev position-static" type="button" data-bs-target="#noteCarousel" data-bs-slide="prev"><img src="../assets/img/icons/up.svg" width="16" alt="icon" /></button>
                                <button class="carousel-control-next position-static" type="button" data-bs-target="#noteCarousel" data-bs-slide="next"><img src="../assets/img/icons/down.svg" width="16" alt="icon" /></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
     </section>

      <!-- <section> close ============================-->
      <!-- ============================================-->

      <!-- ============================================-->
      <!-- <section> begin ============================-->
      <section class="pb-0 pb-lg-4">

        <div class="container">
          <div class="row">
            <div class="col-lg-3 col-md-7 col-12 mb-4 mb-md-6 mb-lg-0 order-0"> <img class="mb-4" src="../assets/img/logo2.svg" width="150" alt="jadoo" />
              <p class="fs--1 text-secondary mb-0 fw-medium">Book your trip in minute, get full Control for much longer.</p>
            </div>
            <div class="col-lg-2 col-md-4 mb-4 mb-lg-0 order-lg-1 order-md-2">
              <h4 class="footer-heading-color fw-bold font-sans-serif mb-3 mb-lg-4">Company</h4>
              <ul class="list-unstyled mb-0">
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">About</a></li>
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Careers</a></li>
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Mobile</a></li>
              </ul>
            </div>
            <div class="col-lg-2 col-md-4 mb-4 mb-lg-0 order-lg-2 order-md-3">
              <h4 class="footer-heading-color fw-bold font-sans-serif mb-3 mb-lg-4">Contact</h4>
              <ul class="list-unstyled mb-0">
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Help/FAQ</a></li>
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Press</a></li>
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Affiliate</a></li>
              </ul>
            </div>
            <div class="col-lg-2 col-md-4 mb-4 mb-lg-0 order-lg-3 order-md-4">
              <h4 class="footer-heading-color fw-bold font-sans-serif mb-3 mb-lg-4">More</h4>
              <ul class="list-unstyled mb-0">
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Airlinefees</a></li>
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Airline</a></li>
                <li class="mb-2"><a class="link-900 fs-1 fw-medium text-decoration-none" href="#!">Low fare tips</a></li>
              </ul>
            </div>
            <div class="col-lg-3 col-md-5 col-12 mb-4 mb-md-6 mb-lg-0 order-lg-4 order-md-1">
              <div class="icon-group mb-4"> <a class="text-decoration-none icon-item shadow-social" id="facebook" href="#!"><i class="fab fa-facebook-f"> </i></a><a class="text-decoration-none icon-item shadow-social" id="instagram" href="#!"><i class="fab fa-instagram"> </i></a><a class="text-decoration-none icon-item shadow-social" id="twitter" href="#!"><i class="fab fa-twitter"> </i></a></div>
              <h4 class="fw-medium font-sans-serif text-secondary mb-3">Discover our app</h4>
              <div class="d-flex align-items-center"> <a href="#!"> <img class="me-2" src="../assets/img/play-store.png" alt="play store" /></a><a href="#!"> <img src="../assets/img/apple-store.png" alt="apple store" /></a></div>
            </div>
          </div>
        </div><!-- end of .container-->

      </section>
      <!-- <section> close ============================-->
      <!-- ============================================-->


      <div class="py-5 text-center">
        <p class="mb-0 text-secondary fs--1 fw-medium">All rights reserved@jadoo.co </p>
      </div>
    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->



    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <script src="../vendors/@popperjs/popper.min.js"></script>
    <script src="../vendors/bootstrap/bootstrap.min.js"></script>
    <script src="../vendors/is/is.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
    <script src="../vendors/fontawesome/all.min.js"></script>
    <script src="../assets/js/theme.js"></script>

    <script>
        // 获取音频播放器元素
        var audioPlayer = document.getElementById('audio-player');

        // 设置音频播放器的源路径
        var source = document.createElement('source');

        source.type = 'audio/mpeg';
        audioPlayer.appendChild(source);
    </script>
    <script>
    document.getElementById('save-note-btn').addEventListener('click', function () {
        // 获取要点内容（纯文本）
        const pointsContent = document.getElementById('points-content').textContent;
        // 获取笔记内容（纯文本）
        const noteContent = document.getElementById('note-content').textContent;
        // 获取总结内容（纯文本）
        const summaryContent = document.getElementById('summary-content').textContent;
        // 获取选择的学科
        const subject = document.getElementById('subject-select').value;
        // 获取选择的笔记类型
        const noteType = document.getElementById('note-type-select').value;

        // 使用fetch API发送POST请求到后端的/路由（和app.py中index路由对应，因为那里同时处理了POST请求）
        fetch('/student', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: `points=${encodeURIComponent(pointsContent)}&note=${encodeURIComponent(noteContent)}&summary=${encodeURIComponent(summaryContent)}&subject=${encodeURIComponent(subject)}&note_type=${encodeURIComponent(noteType)}`
        })
      .then(response => response.text())
      .then(data => {
            if (data.includes("笔记保存成功")) {
                alert('笔记保存成功');
            }
        })
      .catch(error => {
            console.error('保存笔记时出错：', error);
            alert('保存笔记出现错误，请稍后重试');
        });
    });
    </script>
    <script>
        // 添加高亮函数
        function highlight(color) {
            var sel = window.getSelection();
            if (sel.rangeCount > 0) {
                var range = sel.getRangeAt(0);
                var span = document.createElement('span');
                span.style.backgroundColor = color;
                span.classList.add('highlight');

                var selectedText = range.extractContents();
                span.appendChild(selectedText);

                range.insertNode(span);
            }
        }

        // 移除选中内容的高亮函数
        /*function removeHighlight(highlightedSpan) {
            var parentNode = highlightedSpan.parentNode;
            var textContent = highlightedSpan.textContent;
            var index = Array.from(parentNode.childNodes).indexOf(highlightedSpan);
            highlightedSpan.remove();
            var textNode = document.createTextNode(textContent);
            parentNode.insertBefore(textNode, parentNode.childNodes[index]);
        }*/
        // 加粗文本函数
        function boldText() {
            var sel = window.getSelection();
            if (sel.rangeCount > 0) {
                var range = sel.getRangeAt(0);
                var boldElement = document.createElement('b');
                var selectedText = range.extractContents();
                boldElement.appendChild(selectedText);
                range.insertNode(boldElement);
            }
        }
    </script>




    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&amp;family=Volkhov:wght@700&amp;display=swap" rel="stylesheet">
  </body>

</html>